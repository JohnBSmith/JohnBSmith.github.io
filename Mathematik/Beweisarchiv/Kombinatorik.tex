
\chapter{Kombinatorik}

\section{Endliche Mengen}

\subsection{Indiktatorfunktion}

\begin{Definition}[Iverson-Klammer]\mbox{}\\
Für eine Aussage $A$ der klassischen Aussagenlogik definiert man
\[[A] := \begin{cases}
1 &\text{wenn}\;A,\\
0 &\text{sonst}.
\end{cases}\]
\end{Definition}

\begin{Korollar}\label{iverson-basic-rules}
Es gilt
\begin{gather*}
[A\land B] = [A][B],\\
[A\lor B] = [A]+[B]-[A][B],\\
[\neg A] = 1-[A],\\
[A\to B] = 1-[A](1-[B]).
\end{gather*}
\end{Korollar}
\begin{Beweis} Trivial mittels Wertetabelle.\,\qedsymbol
\end{Beweis}

\begin{Korollar}\label{indicator-set-op}
Für die Indikatorfunktion $1_M(x):=[x\in M]$ gilt
\begin{gather*}
1_{A\cap B} = 1_A 1_B,\\
1_{A\cup B} = 1_A + 1_B - 1_{A\cap B}.
\end{gather*}
\end{Korollar}
\begin{Beweis}
Gemäß Korollar \ref{iverson-basic-rules} darf gelten die
Rechnungen
\begin{align*}
1_{A\cap B}(x) = [x\in A\cap B]
= [x\in A\land x\in B] = [x\in A][x\in B] = 1_A(x)1_B(x)
\end{align*}
und
\begin{align*}
1_{A\cup B}(x) &= [x\in A\cup B] = [x\in A\lor x\in B]
= [x\in A] + [x\in B] - [x\in A][x\in B]\\
&= 1_A(x) + 1_B(x) - 1_{A\cap B}(x).\,\qedsymbol
\end{align*}
\end{Beweis}

\begin{Satz}
Für endliche Mengen $A,B$ gilt $|A\cup B| = |A|+|B|-|A\cap B|$.
\end{Satz}
\begin{Beweis}
Gemäß Korollar \ref{indicator-set-op} darf man rechnen
\begin{align*}
|A\cup B| &= \sum_{x\in G} 1_{A\cup B}(x)
= \sum_{x\in G} (1_A(x) + 1_B(x) - 1_{A\cap B}(x))\\
&= \sum_{x\in G} 1_A(x) + \sum_{x\in G} 1_B(x) - \sum_{x\in G} 1_{A\cap B}(x)
= |A| + |B| - |A\cap B|.\,\qedsymbol
\end{align*}
\end{Beweis}

\newpage
\section{Endliche Summen}

\subsection{Allgemeine Regeln}

\begin{Definition}[Summe]
Sei $(M,+,0)$ ein kommutatives Monoid und $a_k\in M$. Die Summe ist
rekursiv definiert als
\[\sum_{k=m}^{m-1} a_k := 0,\quad \sum_{k=m}^n a_k
:= a_n + \sum_{k=m}^{n-1} a_k.\]
\end{Definition}

\begin{Korollar}\label{sum-add}
Es gilt
\[\sum_{k=m}^n (a_k + b_k) = \sum_{k=m}^n a_k + \sum_{k=m}^n b_k.\]
\end{Korollar}
\begin{Beweis} Induktion über $n$. Im Anfang $n=m-1$ haben
beide Seiten den Wert null.

Induktionsschritt:
\begin{align*}
\sum_{k=m}^n (a_k+b_k) &= a_n + b_n + \sum_{k=m}^{n-1} (a_k+b_k)
\stackrel{\mathrm{IV}}= a_n + b_n + \sum_{k=m}^{n-1} a_k + \sum_{k=m}^{n-1} b_k\\
&= \sum_{k=m}^n a_k + \sum_{k=m}^n b_k.\,\qedsymbol
\end{align*}
\end{Beweis}

\begin{Korollar}\label{sum-scale}
Sei $R$ ein Ring und $c,a_k\in R$. Sei $c$ eine
Konstante. Es gilt
\[\sum_{k=m}^n ca_k = c\sum_{k=m}^n a_k.\]
\end{Korollar}
\begin{Beweis} Induktion über $n$. Im Anfang $n=m-1$ haben beide
Seiten den Wert null.

Induktionsschritt:
\[\sum_{k=m}^n ca_k = ca_n + \sum_{k=m}^{n-1} ca_k
\stackrel{\mathrm{IV}}= ca_n + c\sum_{k=m}^{n-1} a_k
= c(a_n + \sum_{k=m}^{n-1} a_k) = c\sum_{k=m}^n a_k.\,\qedsymbol\]
\end{Beweis}

\begin{Korollar}[Aufteilung einer Summe]\label{sum-split}
Für $m\le p\le n$ gilt
\[\sum_{k=m}^n a_k = \sum_{k=m}^{p-1} a_k + \sum_{k=p}^n a_k.\]
\end{Korollar}
\begin{Beweis} Induktion über $n$. Im Induktionsanfang ist $n=p$
und folglich:
\[\sum_{k=m}^p a_k = \sum_{k=m}^{p-1} a_k + p_k
= \sum_{k=m}^{p-1} a_k + \sum_{k=p}^p a_k.\]
Induktionsschritt:
\[\sum_{k=m}^n a_k = a_n + \sum_{k=m}^{n-1} a_k
\stackrel{\mathrm{IV}}= a_n + \sum_{k=m}^{p-1} a_k + \sum_{k=p}^{n-1} a_k
= \sum_{k=m}^{p-1} a_k + \sum_{k=p}^n a_k.\,\qedsymbol\]
\end{Beweis}

\begin{Korollar}[Indexshift]\label{sum-indexshift}\mbox{}\\
Für die Indexverschiebung der Distanz $d\in\Z$ gilt
\[\textstyle\sum_{k=m}^n a_k = \sum_{k=m+d}^{n+d} a_{k-d}.\]
\end{Korollar}
\begin{Beweis}[Beweis 1]
Induktion über $n$. Im Anfang bei $n = m-1$ haben beide Seiten
den Wert null. Induktionsschritt:
\[\sum_{k=m}^n a_k = a_n+\sum_{k=m}^{n-1}a_k \stackrel{\mathrm{IV}}=
a_{(n+d)-d}+\sum_{k=m+d}^{n+d-1}a_{k-d}
= \sum_{k=m+d}^{n+d}a_{k-d}.\,\qedsymbol\]
\end{Beweis}
\begin{Beweis}[Beweis 2]
Mit der Substitution $k=k'-d$ findet sich die Umformung
\[\sum_{k=m}^n a_k \stackrel{\text{(1)}}= \sum_{m\le k\le n} a_k
\stackrel{\text{(2)}}= \sum_{m\le k'-d\le n} a_{k'-d}
\stackrel{\text{(3)}}= \sum_{m+d\le k'\le n+d} a_{k'-d}
\stackrel{\text{(4)}}= \sum_{k'=m+d}^{n+d} a_{k'-d},\]
wobei (1), (4) gemäß Korollar \ref{sum-set-is-range} gelten
und (2), (3) eine andere Schreibweise für die Substitutionsregel
\ref{sum-set-subs} ist.\,\qedsymbol
\end{Beweis}
\strong{Bemerkung.} Der zweite Beweis ist eigentlich zirkulär,
weil der Beweis der Substitutionsregel über den Beweis von
Korollar \ref{sum-set-well-defined} in transitiver Abhängigkeit zum
generalisierten Kommutativgesetz \ref{sum-perm-index} steht, dessen
Beweis einen Indexshift enthält.

\begin{Korollar} Es gilt
\[\sum_{i=m}^n \sum_{j=m'}^{n'} a_{ij} = \sum_{j=m'}^{n'}\sum_{i=m}^n a_{ij}.\]
\end{Korollar}
\begin{Beweis}
Induktion über $n$ und $n'$. Im Anfang bei $n=m-1$ und $n'=m-1$
haben beide Seiten den Wert null. Induktionsschritt für $n$:
\[\sum_{i=m}^n\sum_{j=m'}^{n'} a_{ij}
= \!\!\sum_{j=m'}^{n'} a_{nj}
+ \!\sum_{i=m}^{n-1}\sum_{j=m'}^{n'} a_{ij}
\stackrel{\mathrm{IV}}=
\!\sum_{j=m'}^{n'} a_{nj}
+ \!\sum_{j=m'}^{n'}\sum_{i=m}^{n-1} a_{ij}
= \!\!\sum_{j=m'}^{n'} (a_{nj}+\sum_{i=m}^{n-1} a_{ij})
= \!\!\sum_{j=m'}^{n'} \sum_{i=m}^n a_{ij}.\]
Induktionsschritt für $n'$:
\[\sum_{i=m}^n\sum_{j=m'}^{n'} a_{ij}
= \!\!\sum_{i=m}^n (a_{in'}+\!\!\sum_{j=m'}^{n'-1}a_{ij})
= \!\!\sum_{i=m}^n a_{in'}+\!\!\sum_{i=m}^n\sum_{j=m'}^{n'-1}a_{ij}
\stackrel{\mathrm{IV}}=
\!\sum_{i=m}^n a_{in'}+\sum_{j=m'}^{n'-1}\sum_{i=m}^n a_{ij}
= \!\!\sum_{j=m'}^{n'}\sum_{i=m}^n a_{ij}.\]
Weil immer ein Schritt nach rechts oder ein Schritt nach oben durchführbar ist,
werden alle Punkte $(n,n')$ im Gitter $\Z_{\ge m-1}\times\Z_{\ge m'-1}$ erreicht.\,\qedsymbol
\end{Beweis}

\begin{Korollar}[Umkehrung der Reihenfolge]\label{sum-rev}\mbox{}\\*
Es gilt $\sum_{k=0}^n a_k = \sum_{k=0}^n a_{n-k}$.
\end{Korollar}
\begin{Beweis}
Induktion über $n$. Im Anfang $n=-1$ haben beide Seiten den
Wert null. Der Induktionsschritt ist
\begin{align*}
\sum_{k=0}^n a_{n-k} &= a_{n-n} + \sum_{k=0}^{n-1} a_{n-k}
\stackrel{\mathrm{IV}}= a_0+\sum_{k=0}^{n-1} a_{n-(n-1-k)}a_k\\
&= a_0+\sum_{k=0}^{n-1} a_{k-1}
\stackrel{\text{(1)}}= \sum_{k=0}^0 a_k+\sum_{k=1}^n a_k
\stackrel{\text{(2)}}= \sum_{k=0}^n a_k,
\end{align*}
wobei (1) gemäß Indexshift \ref{sum-indexshift} und
(2) gemäß Aufteilung \ref{sum-split} gilt.\,\qedsymbol
\end{Beweis}

\newpage
\begin{Satz}[Generalisiertes Kommutativgesetz]%
\label{sum-perm-index}\mbox{}\\*
Sei $M=\{k\in\Z\mid m\le k\le n\}$. Für jede Permutation $\pi\colon M\to M$ gilt
\[\sum_{k=m}^n a_k = \sum_{k=m}^n a_{\pi(k)}.\]
\end{Satz}
\begin{Beweis} Induktiv. Sei ohne Beschränkung der Allgemeinheit $m=1$.
Im Induktionsanfang $n=0$ und $n=1$ ist die Gleichung offenkundig erfüllt.

Induktionsschritt. Induktionsvoraussetzung sei die Gültigkeit für $M$.
Zu zeigen ist die Gültigkeit für $M\cup\{n+1\}$.

Sei $t$ ein fester Parameter mit $1\le t\le n+1$.
Im Fall $\pi(t) = n+1$ geht man wie folgt vor.
Man setze $\sigma(k):=\pi(k)$ für $1\le k\le t-1$. Man setze
$\sigma(k):=\pi(k+1)$ für $t\le k\le n$. Weil $n+1$ kein Wert von
$\sigma$ ist, muss $\sigma$ eine Permutation $\sigma\colon M\to M$ sein.
Ergo gilt
\begin{align*}
\sum_{k=1}^{n+1} a_{\pi(k)} &= \sum_{k=1}^{t-1} a_{\pi(k)}
+ a_{\pi(t)} + \sum_{k=t+1}^{n+1} a_{\pi(k)}
= a_{\pi(t)} + \sum_{k=1}^{t-1} a_{\pi(k)}
+ \sum_{k=t}^n a_{\pi(k+1)}\\
&= a_{n+1} + \sum_{k=1}^{t-1} a_{\sigma(k)}
+ \sum_{k=t}^n a_{\sigma(k)}
= a_{n+1} + \sum_{k=1}^n a_{\sigma(k)}\\
&\stackrel{\mathrm{IV}}= a_{n+1} + \sum_{k=1}^n a_k
= \sum_{k=1}^{n+1} a_k.
\end{align*}
Man beachte, dass in den beiden Randfällen $t=1$ und $t=n+1$ die
jeweilige Randsumme den Wert null hat und somit verschwindet.\,\qedsymbol
\end{Beweis}

\begin{Definition}\label{def:sum-set}
Für eine endliche Menge $M$ definiert man
\[\sum_{k\in M} a_k := \sum_{i=m}^n a_{f(i)},\]
wobei $f\colon \{m,\ldots,n\}\to M$ eine frei wählbare Bijektion ist.
\end{Definition}

\begin{Korollar}\label{sum-set-well-defined}
Der Wert Summe auf der rechten Seite von Def. \ref{def:sum-set}
ist unabhängig von der gewählten Bijektion.
\end{Korollar}
\begin{Beweis} Seien $f,g$ zwei solche Bijektionen. Dann existiert
$\pi$ mit $f=g\circ\pi$, womit%
\[\sum_{i=m}^n a_{f(i)} = \sum_{i=m}^n a_{g(\pi(i))} =
\sum_{i=m}^n a_{g(i)}\]
laut Satz \ref{sum-perm-index} gilt.\,\qedsymbol
\end{Beweis}

\begin{Korollar}\label{sum-set-is-range}
Für $M = \{k\in\Z\mid m\le k\le n\}$ gilt
\[\sum_{m\le k\le n} a_k := \sum_{k\in M} a_k = \sum_{k=m}^n a_k.\]
\end{Korollar}
\begin{Beweis} Es gilt
$\sum_{k\in M} a_k = \sum_{k=m}^n a_{\id(k)} = \sum_{k=m}^n a_k$.\,\qedsymbol
\end{Beweis}

\begin{Korollar}[Substitutionsregel]\label{sum-set-subs}
Ist $\varphi\colon M'\to M$ eine Bijektion, gilt
\[\sum_{k\in M} a_k = \sum_{k'\in M'} a_{\varphi(k')}.\]
\end{Korollar}
\begin{Beweis} Zur Bijektion $f\colon\{1,\ldots,|M|\}\to M$ existiert die Bijektion
$g$ mit $f = \varphi\circ g$.

Infolge gilt
\[\sum_{k\in M} a_k = \sum_{i=1}^{|M|} a_{f(i)}
= \sum_{i=1}^{|M|} a_{\varphi(g(i))}
= \sum_{k'\in M'} a_{\varphi(k')}.\,\qedsymbol\]
\end{Beweis}

\begin{Korollar} Es gilt
$\sum\limits_{k\in M} ca_k = c\sum\limits_{k\in M} a_k$ und
$\sum\limits_{k\in M} (a_k + b_k)
= \sum\limits_{k\in M} a_k + \sum\limits_{k\in M} b_k$.
\end{Korollar}
\begin{Beweis}
Laut Definition gilt
\begin{gather*}
\sum_{k\in M} ca_k = \sum_{i=1}^{|M|} ca_{f(i)}
= c\sum_{i=1}^{|M|} a_{f(i)} = c\sum_{k\in M} a_k,\\
\sum_{k\in M} (a_k+b_k) = \sum_{i=1}^{|M|} (a_{f(i)}+b_{f(i)}) =
\sum_{i=1}^{|M|} a_{f(i)} + \sum_{i=1}^{|M|} b_{f(i)}
= \sum_{k\in M} a_k + \sum_{k\in M} b_k.\,\qedsymbol
\end{gather*}
\end{Beweis}

\begin{Korollar} Es gilt
\[\sum_{k\in M}\sum_{l\in N} a_{kl} = \sum_{l\in N}\sum_{k\in M} a_{kl}.\]
\end{Korollar}
\begin{Beweis}
Laut Definition gilt
\[\sum_{k\in M}\sum_{l\in N} a_{kl}
= \sum_{i=1}^{|M|}\sum_{j=1}^{|N|} a_{f(i),g(j)}
= \sum_{j=1}^{|N|}\sum_{i=1}^{|M|} a_{f(i),g(j)}
= \sum_{l\in N}\sum_{k\in M} a_{k,l}.\]
\end{Beweis}

\begin{Korollar}\label{sum-set-disjoint}
Für $M\cap N=\emptyset$ gilt
\[\sum_{k\in M\cup N} a_k = \sum_{k\in M} a_k + \sum_{k\in N} a_k.\]
\end{Korollar}
\begin{Beweis}
Sei $m:=|M|$ und $n:=|N|$. Laut Prämisse existiert eine Bijektion
$f\colon \{1,\ldots, m+n\}\to M\cup N$ mit $f(i)\in M$ für
$1\le i\le m$ und $f(i)\in N$ für $m+1\le i\le m+n$. Das macht
\[\sum_{k\in M\cup N} a_k = \sum_{i=1}^{m+n} a_{f(i)}
= \sum_{i=1}^m a_{f(i)} + \sum_{i=m+1}^{m+n} a_{f(i)}
= \sum_{k\in M} a_k + \sum_{k\in N} a_k.\,\qedsymbol\]
\end{Beweis}

\begin{Korollar}\label{sum-partition}
Für eine disjunkte Zerlegung $M = \bigcup_{i\in I} M_i$ gilt
\[\sum_{k\in M} a_k = \sum_{i\in I}\sum_{k\in M_i} a_k.\]
\end{Korollar}
\begin{Beweis}
Induktion über $I$. Im Anfang $I=\emptyset$ haben beide Seiten
den Wert null. Induktionsvoraussetzung sei die Gültigkeit
für $I$. Zu zeigen ist die Gültigkeit für $I\cup\{n\}$ mit $n\notin I$.
Der Induktionsschritt ist
\[\sum_{k\in M_n\cup M} a_k
= \sum_{k\in M_n} a_k + \sum_{k\in M} a_k
\stackrel{\mathrm{IV}}= \sum_{k\in M_n} a_k +
\sum_{i\in I}\sum_{k\in M_i} a_k
= \sum_{i\in I\cup\{n\}}\sum_{k\in M_i} a_k.\,\qedsymbol\]
\end{Beweis}

\begin{Korollar}
Es gilt
\[\sum_{t\in M\times N} a_t = \sum_{k\in M}\sum_{l\in N} a_{(k,l)}.\]
\end{Korollar}
\begin{Beweis}
Es ist $M = \bigcup_{k\in M} \{k\}$ und weiter $M\times N =
\bigcup_{k\in M} (\{k\}\times N)$ eine disjunkte Zerlegung. Hiermit
findet sich die Umformung
\[\sum_{t\in M\times N} a_t
\stackrel{\text{(1)}}= \sum_{k\in M}\;\sum_{t\in \{k\}\times N} a_t
\stackrel{\text{(2)}}= \sum_{k\in M}\sum_{l\in N} a_{(k,l)},\]
wobei (1) laut Korollar \ref{sum-partition} gilt und (2) per Substitutionsregel
\ref{sum-set-subs} mit der Bijektion $\varphi\colon N\to\{k\}\times N$
mit $\varphi(l):=(k,l)$ und $t=\varphi(l)$.
\end{Beweis}

\begin{Korollar} Mit der Indikatorfunktion $1_A\colon M\to\{0,1\}$
für $A\subseteq M$ gilt
\[\sum_{k\in M} 1_A(k)a_k = \sum_{k\in A} a_k.\]
\end{Korollar}
\begin{Beweis}
Mit disjunkter Zerlegung $M=A\cup (M\setminus A)$
und Korollar \ref{sum-set-disjoint} gilt
\[\sum_{k\in M} 1_A(k)a_k = \sum_{k\in A} \underbrace{1_A(k)}_{1} a_k
+ \sum_{k\in M\setminus A}\underbrace{1_A(k)}_{0} a_k
= \sum_{k\in A} a_k.\,\qedsymbol\]
\end{Beweis}

\begin{Korollar} Allgemein gilt
\[\sum_{k\in A\cup B} a_k = \sum_{k\in A} a_k + \sum_{k\in B} a_k
- \sum_{k\in A\cap B} a_k.\]
\end{Korollar}
\begin{Beweis} Sei $G=A\cup B$ die Grundmenge. Gemäß Korollar
\ref{indicator-set-op} darf man rechnen
\begin{align*}
\sum_{k\in G} a_k &= \sum_{k\in G} 1_{A\cup B}(k)a_k
= \sum_{k\in G} 1_A(k)a_k + \sum_{k\in G} 1_B(k)a_k
- \sum_{k\in G} 1_{A\cap B}(k)a_k\\
&= \sum_{k\in A} a_k + \sum_{k\in B} a_k - \sum_{k\in A\cap B} a_k.\,\qedsymbol
\end{align*}
\end{Beweis}

\newpage
\subsection{Klassische Partialsummen}

\begin{Korollar}[Partialsumme der konstanten Folge]%
\label{sum-const}\mbox{}\\*
Es gilt $\sum_{k=m}^n 1 = n-m+1$.
\end{Korollar}
\begin{Beweis}
Induktion über $n$. Im Anfang $n=m-1$ haben beide Seiten
den Wert null.

Induktionsschritt:
\[\sum_{k=m}^n 1 = 1 + \sum_{k=m}^{n-1}
\stackrel{\mathrm{IV}}= 1 + n-1-m+1 = n-m+1.\,\qedsymbol\]
\end{Beweis}

\begin{Satz}[Partialsumme der arithmetischen Folge]\mbox{}\\*
Es gilt $\sum_{k=0}^n k = \frac{n}{2}(n+1)$.
\end{Satz}
\begin{Beweis}[Beweis 1]
Induktion über $n$. Im Anfang $n=-1$ haben beide Seiten den Wert null.

Induktionsschritt:
\[\sum_{k=0}^n k = n + \sum_{k=0}^{n-1} k
\stackrel{\mathrm{IV}}= n + \frac{n-1}{2}(n-1+1)
= \frac{n}{2}(2 + n-1) = \frac{n}{2}(n+1).\,\qedsymbol\]
\end{Beweis}
\begin{Beweis}[Beweis 2]
Klassischer Beweis. Man findet die Umformung
\[2\sum_{k=0}^n k = \!\sum_{k=0}^n k + \!\sum_{k=0}^n k
\stackrel{\text{(1)}}= \!\sum_{k=0}^n k + \!\sum_{k=0}^n (n-k)
\stackrel{\text{(2)}}= \!\sum_{k=0}^n (k+n-k)
= \!\sum_{k=0}^n n \stackrel{\text{(3)}}= n\!\sum_{k=0}^n 1
\stackrel{\text{(4)}}= n(n+1),\]
wobei (1), (2), (3), (4) gemäß Korollar
\ref{sum-rev}, \ref{sum-add}, \ref{sum-scale}, \ref{sum-const}
gelten.\,\qedsymbol
\end{Beweis}

\begin{Satz}[Partialsumme der geometrischen Folge]%
\label{sum-geom-seq}\mbox{}\\*
Für $m\ge 0$ und $z\in\C\setminus\{1\}$ gilt $\sum_{k=m}^{n-1} z^k = \frac{z^n-z^m}{z-1}$.
\end{Satz}
\begin{Beweis}
Induktion über $n$. Im Anfang $n=m-1$ haben beiden Seiten den Wert null.

Induktionsschritt:
\[\sum_{k=m}^n z^k = z^n + \sum_{k=m}^{n-1} z^k
\stackrel{\mathrm{IV}}= z^n + \frac{z^n-z^m}{z-1}
= \frac{(z-1)z^n+z^n-z^m}{z-1}
= \frac{z^{n+1}-z^m}{z-1}.\,\qedsymbol\]
\end{Beweis}

\begin{Korollar}
Für $m\ge 0$ und $z\in\C\setminus\{1\}$ gilt
\[\sum_{k=m}^{n-1} kz^k
= \frac{(nz^n-mz^m)(z-1) - (z^n-z^m)z}{(z-1)^2}.\]
\end{Korollar}
\begin{Beweis}
Die Gleichung von Satz \ref{sum-geom-seq} für $m\ge 1$ auf beiden
Seiten nach $z$ ableiten und anschließend beide Seiten mit $z$
multiplizieren. Den Fall $m=0$ und in diesem den Summand zu $k=0$
explizit betrachten, sonst aber auf dieselbe Weise vorgehen.\,\qedsymbol
\end{Beweis}

