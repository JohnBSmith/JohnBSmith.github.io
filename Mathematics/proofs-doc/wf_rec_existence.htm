<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>wf_rec_existence</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="main.css" rel="stylesheet">
</head>
<body>
<h3>Theorem wf_rec_existence</h3>
<div class='box'><div class='thm'><b class='thm'>Theorem.</b> wf_rec_existence<br>
set X → set Y → wf X R →
  dom R = X → (∀x. ∀g. φ x g ∈ Y) → ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x}))</div></div>
<pre><b>Proof</b>
01. 1 ⊢ wf X R, <a href='hypo.htm'>hypo</a>.
02. 2 ⊢ dom R = X, <a href='hypo.htm'>hypo</a>.
03. 3 ⊢ ∀x. ∀f. φ x f ∈ Y, <a href='hypo.htm'>hypo</a>.
04. 4 ⊢ F = {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A}, <a href='hypo.htm'>hypo</a>.
05. 5 ⊢ f = ⋂F, <a href='hypo.htm'>hypo</a>.
06. 6 ⊢ x ∈ X, <a href='hypo.htm'>hypo</a>.
07. 6 ⊢ set x, <a href='set_intro.htm'>set_intro</a> 6.
08. 3 ⊢ ∀f. φ x f ∈ Y, <a href='uq_elim.htm'>uq_elim</a> 3.
09. 3 ⊢ φ x f ∈ Y, <a href='uq_elim.htm'>uq_elim</a> 8.
10. 3 ⊢ set (φ x f), <a href='set_intro.htm'>set_intro</a> 9.
11. 3, 6 ⊢ set (x, φ x f), <a href='set_pair.htm'>set_pair</a> 7 10.
12. 3, 6 ⊢ set (x, φ x (restr g (inv_img R {x}))), 11.
13. 13 ⊢ A ∈ F, <a href='hypo.htm'>hypo</a>.
14. 14 ⊢ fn_on g (inv_img R {x}), <a href='hypo.htm'>hypo</a>.
15. 4, 13 ⊢ A ∈ {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A}, <a href='eq_subst.htm'>eq_subst</a> 4 13, P u ↔ A ∈ u.
16. 4, 13 ⊢ A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A, <a href='comp_elim.htm'>comp_elim</a> 15.
17. 4, 13 ⊢ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A, <a href='conj_elimr.htm'>conj_elimr</a> 16.
18. 4, 13 ⊢ x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A, <a href='uq_elim.htm'>uq_elim</a> 17.
19. 4, 6, 13 ⊢ ∀g.
  fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A, <a href='subj_elim.htm'>subj_elim</a> 18 6.
20. 4, 6, 13, 14 ⊢ (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A, <a href='uq_bounded_elim.htm'>uq_bounded_elim</a> 19 14.
21. 5, 13 ⊢ f ⊆ A, <a href='Intersection_is_lower_bound.htm'>Intersection_is_lower_bound</a> 5 13.
22. 22 ⊢ ∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f, <a href='hypo.htm'>hypo</a>.
23. 22 ⊢ u ∈ inv_img R {x} → (u, app g u) ∈ f, <a href='uq_elim.htm'>uq_elim</a> 22.
24. 24 ⊢ u ∈ inv_img R {x}, <a href='hypo.htm'>hypo</a>.
25. 22, 24 ⊢ (u, app g u) ∈ f, <a href='subj_elim.htm'>subj_elim</a> 23 24.
26. 5, 22, 13, 24 ⊢ (u, app g u) ∈ A, <a href='incl_elim.htm'>incl_elim</a> 21 25.
27. 5, 22, 13 ⊢ u ∈ inv_img R {x} → (u, app g u) ∈ A, <a href='subj_intro.htm'>subj_intro</a> 26.
28. 5, 22, 13 ⊢ ∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A, <a href='uq_intro.htm'>uq_intro</a> 27.
29. 4, 5, 6, 22, 14, 13 ⊢
  (x, φ x (restr g (inv_img R {x}))) ∈ A, <a href='subj_elim.htm'>subj_elim</a> 20 28.
30. 4, 5, 6, 22, 14 ⊢
  A ∈ F → (x, φ x (restr g (inv_img R {x}))) ∈ A, <a href='subj_intro.htm'>subj_intro</a> 29.
31. 4, 5, 6, 22, 14 ⊢
  ∀A. A ∈ F → (x, φ x (restr g (inv_img R {x}))) ∈ A, <a href='uq_intro.htm'>uq_intro</a> 30.
32. 3, 4, 5, 6, 22, 14 ⊢
  (x, φ x (restr g (inv_img R {x}))) ∈ ⋂F, <a href='Intersection_intro.htm'>Intersection_intro</a> 12 31.
33. 3, 4, 5, 6, 14, 22 ⊢ (x, φ x (restr g (inv_img R {x}))) ∈ f,
  <a href='eq_subst_rev.htm'>eq_subst_rev</a> 5 32, P u ↔ (x, φ x (restr g (inv_img R {x}))) ∈ u.
34. 3, 4, 5, 6, 14 ⊢ (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f) →
  (x, φ x (restr g (inv_img R {x}))) ∈ f, <a href='subj_intro.htm'>subj_intro</a> 33.
35. 3, 4, 5, 6 ⊢ fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f) →
  (x, φ x (restr g (inv_img R {x}))) ∈ f,
    <a href='subj_intro.htm'>subj_intro</a> 34.
36. 3, 4, 5, 6 ⊢ ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f) →
  (x, φ x (restr g (inv_img R {x}))) ∈ f, <a href='uq_intro.htm'>uq_intro</a> 35.
37. 3, 4, 5 ⊢ x ∈ X → ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f) →
  (x, φ x (restr g (inv_img R {x}))) ∈ f, <a href='subj_intro.htm'>subj_intro</a> 36.
38. 3, 4, 5 ⊢ ∀x. x ∈ X → ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f) →
  (x, φ x (restr g (inv_img R {x}))) ∈ f, <a href='uq_intro.htm'>uq_intro</a> 37.
39. 3, 6 ⊢ (x, φ x f) ∈ X × Y, <a href='prod_intro.htm'>prod_intro</a> 6 9.
40. 40 ⊢ (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ X × Y), <a href='hypo.htm'>hypo</a>.
41. 3, 6, 40 ⊢ (x, φ x f) ∈ X × Y, <a href='wk.htm'>wk</a> 39.
42. 3, 6 ⊢ (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ X × Y) →
  (x, φ x f) ∈ X × Y, <a href='subj_intro.htm'>subj_intro</a> 41.
43. 3, 6, 14 ⊢ (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ X × Y) →
  (x, φ x f) ∈ X × Y, <a href='wk.htm'>wk</a> 42.
44. 3, 6 ⊢ fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ X × Y) →
  (x, φ x f) ∈ X × Y, <a href='subj_intro.htm'>subj_intro</a> 43.
45. 3, 6 ⊢ ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ X × Y) →
  (x, φ x f) ∈ X × Y, <a href='uq_intro.htm'>uq_intro</a> 44.
46. 3 ⊢ x ∈ X → ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ X × Y) →
  (x, φ x f) ∈ X × Y, <a href='subj_intro.htm'>subj_intro</a> 45.
47. 3 ⊢ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ X × Y) →
  (x, φ x f) ∈ X × Y, <a href='uq_intro.htm'>uq_intro</a> 46.
48. ⊢ X × Y ⊆ X × Y, <a href='incl_refl.htm'>incl_refl</a>.
49. 3 ⊢ X × Y ⊆ X × Y ∧
  ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ X × Y) →
  (x, φ x f) ∈ X × Y, <a href='conj_intro.htm'>conj_intro</a> 48 47.
50. 50 ⊢ set X, <a href='hypo.htm'>hypo</a>.
51. 51 ⊢ set Y, <a href='hypo.htm'>hypo</a>.
52. 50, 51 ⊢ set (X × Y), <a href='set_prod.htm'>set_prod</a> 50 51.
53. 50, 51, 3 ⊢ X × Y ∈ {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x f) ∈ A}, <a href='comp_intro.htm'>comp_intro</a> 52 49, P A ↔
    A ⊆ X × Y ∧ ∀x.
x ∈ X →
    ∀g. fn_on g (inv_img R {x}) →
    (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
    (x, φ x f) ∈ A.
54. 50, 51, 3 ⊢ X × Y ∈ {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A}, 53.
55. 50, 51, 3, 4 ⊢ X × Y ∈ F, <a href='eq_subst_rev.htm'>eq_subst_rev</a> 4 54, P u ↔ X × Y ∈ u.
56. 50, 51, 3, 4, 5 ⊢ f ⊆ X × Y, <a href='Intersection_is_lower_bound.htm'>Intersection_is_lower_bound</a> 5 55.
57. 50, 51, 3, 4, 5 ⊢ f ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f) →
  (x, φ x (restr g (inv_img R {x}))) ∈ f, <a href='conj_intro.htm'>conj_intro</a> 56 38.
58. 50, 51, 3, 4, 5 ⊢ set f, <a href='subset.htm'>subset</a> 56 52.
59. 50, 51, 3, 4, 5 ⊢ f ∈ {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A}, <a href='comp_intro.htm'>comp_intro</a> 58 57.
60. 50, 51, 3, 4, 5 ⊢ f ∈ F, <a href='eq_subst_rev.htm'>eq_subst_rev</a> 4 59, P u ↔ f ∈ u.
61. 61 ⊢ x ∈ X, <a href='hypo.htm'>hypo</a>.
62. 62 ⊢ ∀u. u ∈ X → (u, x) ∈ R →
  ∃y0. y0 ∈ Y ∧ ∀y. y0 = y ↔ (u, y) ∈ f, <a href='hypo.htm'>hypo</a>.
63. 63 ⊢ u ∈ inv_img R {x}, <a href='hypo.htm'>hypo</a>.
64. 62 ⊢ u ∈ X → (u, x) ∈ R →
  ∃y0. y0 ∈ Y ∧ ∀y. y0 = y ↔ (u, y) ∈ f, <a href='uq_elim.htm'>uq_elim</a> 62.
65. 63 ⊢ ∃a. a ∈ {x} ∧ (u, a) ∈ R, <a href='inv_img_elim.htm'>inv_img_elim</a> 63.
66. 66 ⊢ a ∈ {x} ∧ (u, a) ∈ R, <a href='hypo.htm'>hypo</a>.
67. 66 ⊢ a ∈ {x}, <a href='conj_eliml.htm'>conj_eliml</a> 66.
68. 66 ⊢ (u, a) ∈ R, <a href='conj_elimr.htm'>conj_elimr</a> 66.
69. 61 ⊢ set x, <a href='set_intro.htm'>set_intro</a> 61.
70. 61, 66 ⊢ a = x, <a href='sg_elim.htm'>sg_elim</a> 69 67.
71. 61, 66 ⊢ (u, x) ∈ R, <a href='eq_subst.htm'>eq_subst</a> 70 68, P x ↔ (u, x) ∈ R.
72. 61, 63 ⊢ (u, x) ∈ R, <a href='ex_elim.htm'>ex_elim</a> 65 71.
73. 66 ⊢ u ∈ dom R, <a href='dom_intro.htm'>dom_intro</a> 68.
74. 63 ⊢ u ∈ dom R, <a href='ex_elim.htm'>ex_elim</a> 65 73.
75. 2, 63 ⊢ u ∈ X, <a href='eq_subst.htm'>eq_subst</a> 2 74, P X ↔ u ∈ X.
76. 2, 62, 63 ⊢ (u, x) ∈ R → ∃y0. y0 ∈ Y ∧ ∀y. y0 = y ↔ (u, y) ∈ f,
  <a href='subj_elim.htm'>subj_elim</a> 64 75.
77. 2, 61, 62, 63 ⊢ ∃y0. y0 ∈ Y ∧ ∀y. y0 = y ↔ (u, y) ∈ f,
  <a href='subj_elim.htm'>subj_elim</a> 76 72.
78. ⊢ y ∈ Y → set y, <a href='set_intro.htm'>set_intro</a>.
79. ⊢ ∀y. y ∈ Y → set y, <a href='uq_intro.htm'>uq_intro</a> 78.
80. 2, 61, 62, 63 ⊢ ∃y0. set y0 ∧ ∀y. y0 = y ↔ (u, y) ∈ f,
  <a href='ex_weaken_conj.htm'>ex_weaken_conj</a> 79 77.
81. 2, 61, 62, 63 ⊢ ∃y0. set y0 ∧ {y0} = {y | (u, y) ∈ f},
  <a href='sg_eq_from_ex_uniq.htm'>sg_eq_from_ex_uniq</a> 80.
82. 2, 61, 62 ⊢
  u ∈ inv_img R {x} → ∃y0. set y0 ∧ ∀y. y0 = y ↔ (u, y) ∈ f,
  <a href='subj_intro.htm'>subj_intro</a> 80.
83. 2, 61, 62 ⊢
  ∀u. u ∈ inv_img R {x} → ∃y0. set y0 ∧ ∀y. y0 = y ↔ (u, y) ∈ f,
  <a href='uq_intro.htm'>uq_intro</a> 82.
84. 50, 51, 3, 4, 5 ⊢ relation f, <a href='relation_from_incl.htm'>relation_from_incl</a> 56.
85. 50, 51, 2, 3, 4, 5, 61, 62 ⊢ fn_on f (inv_img R {x}),
  <a href='fn_on_intro.htm'>fn_on_intro</a> 84 83.
86. ⊢ app f u = app f u, <a href='eq_refl.htm'>eq_refl</a>.
87. 2, 61, 62, 63 ⊢ (u, app f u) ∈ f, <a href='app_elim_lemma.htm'>app_elim_lemma</a> 81 86.
88. 88 ⊢ y0 ∈ Y ∧ ∀y. y0 = y ↔ (u, y) ∈ f, <a href='hypo.htm'>hypo</a>.
89. 88 ⊢ y0 ∈ Y, <a href='conj_eliml.htm'>conj_eliml</a> 88.
90. 88 ⊢ ∀y. y0 = y ↔ (u, y) ∈ f, <a href='conj_elimr.htm'>conj_elimr</a> 88.
91. 88 ⊢ y0 = app f u ↔ (u, app f u) ∈ f, <a href='uq_elim.htm'>uq_elim</a> 90.
92. 2, 61, 62, 63, 88 ⊢ y0 = app f u, <a href='rsubj_elim.htm'>rsubj_elim</a> 91 87.
93. 2, 61, 62, 63, 88 ⊢ app f u ∈ Y, <a href='eq_subst.htm'>eq_subst</a> 92 89, P y ↔ y ∈ Y.
94. 2, 61, 62, 63 ⊢ app f u ∈ Y, <a href='ex_elim.htm'>ex_elim</a> 77 93.
95. 2, 61, 62, 63 ⊢ app f u ∈ Y ∧ (u, app f u) ∈ f, <a href='conj_intro.htm'>conj_intro</a> 94 87.
96. 2, 61, 62, 63 ⊢ ∃y. y ∈ Y ∧ (u, y) ∈ f, <a href='ex_intro.htm'>ex_intro</a> 95.
97. 3, 4, 5, 61 ⊢ ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f) →
  (x, φ x (restr g (inv_img R {x}))) ∈ f, <a href='uq_bounded_elim.htm'>uq_bounded_elim</a> 38 61.
98. 50, 51, 2, 3, 4, 5, 61, 62 ⊢
  (∀u. u ∈ inv_img R {x} → (u, app f u) ∈ f) →
  (x, φ x (restr f (inv_img R {x}))) ∈ f, <a href='uq_bounded_elim.htm'>uq_bounded_elim</a> 97 85.
99. 2, 61, 62 ⊢ u ∈ inv_img R {x} → (u, app f u) ∈ f, <a href='subj_intro.htm'>subj_intro</a> 87.
100. 2, 61, 62 ⊢ ∀u. u ∈ inv_img R {x} → (u, app f u) ∈ f, <a href='uq_intro.htm'>uq_intro</a> 99.
101. 50, 51, 2, 3, 4, 5, 61, 62 ⊢
  (x, φ x (restr f (inv_img R {x}))) ∈ f, <a href='subj_elim.htm'>subj_elim</a> 98 100.
102. 3 ⊢ ∀f. φ x f ∈ Y, <a href='uq_elim.htm'>uq_elim</a> 3.
103. 3 ⊢ φ x (restr f (inv_img R {x})) ∈ Y, <a href='uq_elim.htm'>uq_elim</a> 102.
104. 50, 51, 2, 3, 4, 5, 61, 62 ⊢ φ x (restr f (inv_img R {x})) ∈ Y ∧
  (x, φ x (restr f (inv_img R {x}))) ∈ f, <a href='conj_intro.htm'>conj_intro</a> 103 101.
105. 50, 51, 2, 3, 4, 5, 61, 62 ⊢ ∃y. y ∈ Y ∧ (x, y) ∈ f, <a href='ex_intro.htm'>ex_intro</a> 104.
106. 106 ⊢ (x, y') ∈ f, <a href='hypo.htm'>hypo</a>.
107. 107 ⊢ ¬y' = φ x (restr f (inv_img R {x})), <a href='hypo.htm'>hypo</a>.
108. ⊢ f \ {(x, y')} ⊆ f, <a href='diff_incl.htm'>diff_incl</a>.
109. 50, 51, 3, 4, 5 ⊢ f \ {(x, y')} ⊆ X × Y, <a href='incl_trans.htm'>incl_trans</a> 108 56.
110. 110 ⊢ a ∈ X, <a href='hypo.htm'>hypo</a>.
111. 111 ⊢ fn_on g (inv_img R {a}), <a href='hypo.htm'>hypo</a>.
112. 112 ⊢ ∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f \ {(x, y')}, <a href='hypo.htm'>hypo</a>.
113. 113 ⊢ u ∈ inv_img R {a}, <a href='hypo.htm'>hypo</a>.
114. 112, 113 ⊢ (u, app g u) ∈ f \ {(x, y')}, <a href='uq_bounded_elim.htm'>uq_bounded_elim</a> 112 113.
115. 112, 113 ⊢ (u, app g u) ∈ f, <a href='diff_eliml.htm'>diff_eliml</a> 114.
116. 112 ⊢ u ∈ inv_img R {a} → (u, app g u) ∈ f, <a href='subj_intro.htm'>subj_intro</a> 115.
117. 112 ⊢ ∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f, <a href='uq_intro.htm'>uq_intro</a> 116.
118. 3, 4, 5, 110 ⊢ ∀g. fn_on g (inv_img R {a}) →
  (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f) →
  (a, φ a (restr g (inv_img R {a}))) ∈ f, <a href='uq_bounded_elim.htm'>uq_bounded_elim</a> 38 110.
119. 3, 4, 5, 110, 111 ⊢ (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f) →
  (a, φ a (restr g (inv_img R {a}))) ∈ f, <a href='uq_bounded_elim.htm'>uq_bounded_elim</a> 118 111.
120. 3, 4, 5, 110, 112, 111 ⊢
  (a, φ a (restr g (inv_img R {a}))) ∈ f, <a href='subj_elim.htm'>subj_elim</a> 119 117.
121. 121 ⊢ (a, φ a (restr g (inv_img R {a}))) = (x, y'), <a href='hypo.htm'>hypo</a>.
122. 3 ⊢ ∀f. φ x f ∈ Y, <a href='uq_elim.htm'>uq_elim</a> 3.
123. 3 ⊢ φ x f ∈ Y, <a href='uq_elim.htm'>uq_elim</a> 122.
124. 3 ⊢ set (φ x f), <a href='set_intro.htm'>set_intro</a> 123.
125. 3 ⊢ set (φ a (restr g (inv_img R {a}))), 124.
126. 110 ⊢ set a, <a href='set_intro.htm'>set_intro</a> 110.
127. 3, 110, 121 ⊢ a = x ∧ φ a (restr g (inv_img R {a})) = y',
  <a href='pair_property.htm'>pair_property</a> 126 125 121.
128. 3, 110, 121 ⊢ a = x, <a href='conj_eliml.htm'>conj_eliml</a> 127.
129. 3, 110, 121 ⊢ φ a (restr g (inv_img R {a})) = y', <a href='conj_elimr.htm'>conj_elimr</a> 127.
130. 112 ⊢ u ∈ inv_img R {a} → (u, app g u) ∈ f, <a href='subj_intro.htm'>subj_intro</a> 115.
131. 3, 110, 121, 112 ⊢
  u ∈ inv_img R {x} → (u, app g u) ∈ f, <a href='eq_subst.htm'>eq_subst</a> 128 130.
132. 3, 110, 112, 121, 63 ⊢ (u, app g u) ∈ f, <a href='subj_elim.htm'>subj_elim</a> 131 63.
133. 2, 3, 61, 62, 110, 112, 121, 63 ⊢
  app g u = app f u, <a href='app_intro_lemma.htm'>app_intro_lemma</a> 81 132.
134. 2, 3, 61, 62, 110, 112, 121, 63 ⊢ app f u = app g u, <a href='eq_symm.htm'>eq_symm</a> 133.
135. 2, 3, 61, 62, 110, 112, 121 ⊢
  u ∈ inv_img R {x} → app f u = app g u, <a href='subj_intro.htm'>subj_intro</a> 134.
136. 2, 3, 61, 62, 110, 112, 121 ⊢
  ∀u. u ∈ inv_img R {x} → app f u = app g u, <a href='uq_intro.htm'>uq_intro</a> 135.
137. 3, 110, 121, 111 ⊢ fn_on g (inv_img R {x}), <a href='eq_subst.htm'>eq_subst</a> 128 111.
138. 50, 51, 2, 3, 4, 5, 61, 62, 110, 112, 121, 111 ⊢
  restr f (inv_img R {x}) = restr g (inv_img R {x}),
  <a href='fn_on_extensionality.htm'>fn_on_extensionality</a> 85 137 136.
139. 3, 110, 121 ⊢ φ x (restr g (inv_img R {x})) = y', <a href='eq_subst.htm'>eq_subst</a> 128 129.
140. 50, 51, 2, 3, 4, 5, 61, 62, 110, 112, 121, 111 ⊢
  φ x (restr f (inv_img R {x})) = y',
  <a href='eq_subst_rev.htm'>eq_subst_rev</a> 138 139, P u ↔ φ x u = y'.
141. 50, 51, 2, 3, 4, 5, 61, 62, 110, 112, 121, 111 ⊢
  y' = φ x (restr f (inv_img R {x})), <a href='eq_symm.htm'>eq_symm</a> 140.
142. 50, 51, 2, 3, 4, 5, 61, 62, 107, 110, 112, 111, 121 ⊢ ⊥,
  <a href='neg_elim.htm'>neg_elim</a> 107 141.
143. 50, 51, 2, 3, 4, 5, 61, 62, 107, 110, 112, 111 ⊢
  ¬(a, φ a (restr g (inv_img R {a}))) = (x, y'), <a href='neg_intro.htm'>neg_intro</a> 142.
144. 106 ⊢ set (x, y'), <a href='set_intro.htm'>set_intro</a> 106.
145. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107, 110, 112, 111 ⊢
  ¬(a, φ a (restr g (inv_img R {a}))) ∈ {(x, y')}, <a href='sg_neg_intro.htm'>sg_neg_intro</a> 144 143.
146. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107, 110, 111, 112 ⊢
  (a, φ a (restr g (inv_img R {a}))) ∈ f \ {(x, y')}, <a href='diff_intro.htm'>diff_intro</a> 120 145.
147. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107, 110 ⊢
  fn_on g (inv_img R {a}) →
  (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f \ {(x, y')}) →
  (a, φ a (restr g (inv_img R {a}))) ∈ f \ {(x, y')}, <a href='subj_intro_ii.htm'>subj_intro_ii</a> 146.
148. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107, 110 ⊢
  ∀g. fn_on g (inv_img R {a}) →
  (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f \ {(x, y')}) →
  (a, φ a (restr g (inv_img R {a}))) ∈ f \ {(x, y')}, <a href='uq_intro.htm'>uq_intro</a> 147.
149. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢
  a ∈ X → ∀g. fn_on g (inv_img R {a}) →
  (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f \ {(x, y')}) →
  (a, φ a (restr g (inv_img R {a}))) ∈ f \ {(x, y')}, <a href='subj_intro.htm'>subj_intro</a> 148.
150. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢
  ∀a. a ∈ X → ∀g. fn_on g (inv_img R {a}) →
  (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f \ {(x, y')}) →
  (a, φ a (restr g (inv_img R {a}))) ∈ f \ {(x, y')}, <a href='uq_intro.htm'>uq_intro</a> 149.
151. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢
  f \ {(x, y')} ⊆ X × Y ∧
  ∀a. a ∈ X → ∀g. fn_on g (inv_img R {a}) →
  (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ f \ {(x, y')}) →
  (a, φ a (restr g (inv_img R {a}))) ∈ f \ {(x, y')}, <a href='conj_intro.htm'>conj_intro</a> 109 150.
152. 50, 51, 3, 4, 5 ⊢ set f, <a href='set_intro.htm'>set_intro</a> 60.
153. 50, 51, 3, 4, 5 ⊢ set (f \ {(x, y')}), <a href='subset.htm'>subset</a> 108 152.
154. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢
  f \ {(x, y')} ∈ {A | A ⊆ X × Y ∧ ∀a. a ∈ X →
    ∀g. fn_on g (inv_img R {a}) →
    (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ A) →
    (a, φ a (restr g (inv_img R {a}))) ∈ A}, <a href='comp_intro.htm'>comp_intro</a> 153 151,
    P A ↔ A ⊆ X × Y ∧
      ∀a.
a ∈ X → ∀g. fn_on g (inv_img R {a}) →
      (∀u. u ∈ inv_img R {a} → (u, app g u) ∈ A) →
      (a, φ a (restr g (inv_img R {a}))) ∈ A.
155. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢
  f \ {(x, y')} ∈ F, eq_subst_rev 4 154, P u ↔ f \ {(x, y')} ∈ u.
156. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢
  f ⊆ f \ {(x, y')}, <a href='Intersection_is_lower_bound.htm'>Intersection_is_lower_bound</a> 5 155.
157. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢
  (x, y') ∈ f \ {(x, y')}, <a href='incl_elim.htm'>incl_elim</a> 156 106.
158. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢
  ¬(x, y') ∈ {(x, y')}, <a href='diff_elimr.htm'>diff_elimr</a> 157.
159. ⊢ (x, y') = (x, y'), <a href='eq_refl.htm'>eq_refl</a>.
160. 106 ⊢ (x, y') ∈ {(x, y')}, <a href='sg_intro.htm'>sg_intro</a> 144 159.
161. 50, 51, 2, 3, 4, 5, 61, 62, 106, 107 ⊢ ⊥, <a href='neg_elim.htm'>neg_elim</a> 158 160.
162. 50, 51, 2, 3, 4, 5, 61, 62, 106 ⊢
  ¬¬y' = φ x (restr f (inv_img R {x})), <a href='neg_intro.htm'>neg_intro</a> 161.
163. 50, 51, 2, 3, 4, 5, 61, 62, 106 ⊢
  y' = φ x (restr f (inv_img R {x})), <a href='dne.htm'>dne</a> 162.
164. 50, 51, 2, 3, 4, 5, 61, 62, 106 ⊢
  φ x (restr f (inv_img R {x})) = y', <a href='eq_symm.htm'>eq_symm</a> 163.
165. 50, 51, 2, 3, 4, 5, 61, 62 ⊢
  (x, y') ∈ f → φ x (restr f (inv_img R {x})) = y', <a href='subj_intro.htm'>subj_intro</a> 164.
166. 50, 51, 2, 3, 4, 5, 61, 62 ⊢
  ∀y'. (x, y') ∈ f → φ x (restr f (inv_img R {x})) = y', <a href='uq_intro.htm'>uq_intro</a> 165.
167. 50, 51, 2, 3, 4, 5, 61, 62 ⊢ φ x (restr f (inv_img R {x})) ∈ Y ∧
  (x, φ x (restr f (inv_img R {x}))) ∈ f ∧
  ∀y'. (x, y') ∈ f → φ x (restr f (inv_img R {x})) = y',
  <a href='conj_intro.htm'>conj_intro</a> 104 166.
168. 50, 51, 2, 3, 4, 5, 61, 62 ⊢ ∃y. y ∈ Y ∧
  (x, y) ∈ f ∧ ∀y'. (x, y') ∈ f → y = y', <a href='ex_intro.htm'>ex_intro</a> 167.
169. 50, 51, 2, 3, 4, 5, 61, 62 ⊢ ∃z. z ∈ Y ∧
  ∀y. z = y ↔ (x, y) ∈ f, <a href='ex_uniq_from_mixed_form.htm'>ex_uniq_from_mixed_form</a> 168.
170. 50, 51, 2, 3, 4, 5 ⊢ x ∈ X →
  (∀u. u ∈ X → (u, x) ∈ R → ∃z. z ∈ Y ∧ ∀y. z = y ↔ (u, y) ∈ f) →
  (∃z. z ∈ Y ∧ ∀y. z = y ↔ (x, y) ∈ f), <a href='subj_intro_ii.htm'>subj_intro_ii</a> 169.
171. 50, 51, 2, 3, 4, 5 ⊢ ∀x. x ∈ X →
  (∀u. u ∈ X → (u, x) ∈ R → ∃z. z ∈ Y ∧ ∀y. z = y ↔ (u, y) ∈ f) →
  ∃z. z ∈ Y ∧ ∀y. z = y ↔ (x, y) ∈ f, <a href='uq_intro.htm'>uq_intro</a> 170.
172. 50, 51, 1, 2, 3, 4, 5 ⊢ ∀x. x ∈ X →
  ∃z. z ∈ Y ∧ ∀y. z = y ↔ (x, y) ∈ f, <a href='wf_induction.htm'>wf_induction</a> 1 171.
173. 50, 51, 3, 4, 5 ⊢ dom f ⊆ X, <a href='dom_of_subclass_prod.htm'>dom_of_subclass_prod</a> 56.
174. 50, 51, 3, 4, 5 ⊢ rng f ⊆ Y, <a href='rng_of_subclass_prod.htm'>rng_of_subclass_prod</a> 56.
175. 50, 51, 1, 2, 3, 4, 5 ⊢ X ⊆ dom f, <a href='subclass_dom_from_ex_uniq.htm'>subclass_dom_from_ex_uniq</a> 172.
176. 50, 51, 1, 2, 3, 4, 5 ⊢ dom f = X, <a href='incl_antisym.htm'>incl_antisym</a> 173 175.
177. 50, 51, 1, 2, 3, 4, 5 ⊢ fn_on f X, <a href='fn_on_intro_cod.htm'>fn_on_intro_cod</a> 84 172.
178. 50, 51, 1, 2, 3, 4, 5 ⊢ function f, <a href='function_from_fn_on.htm'>function_from_fn_on</a> 177 173.
179. 50, 51, 1, 2, 3, 4, 5 ⊢ map f X Y, <a href='map_intro.htm'>map_intro</a> 178 176 174.
180. ⊢ inv_img R {x} ⊆ dom R, <a href='inv_img_incl_in_dom.htm'>inv_img_incl_in_dom</a>.
181. 2 ⊢ inv_img R {x} ⊆ X, <a href='eq_subst.htm'>eq_subst</a> 2 180, P X ↔ inv_img R {x} ⊆ X.
182. 182 ⊢ u ∈ inv_img R {x}, <a href='hypo.htm'>hypo</a>.
183. 2, 182 ⊢ u ∈ X, <a href='incl_elim.htm'>incl_elim</a> 181 182.
184. ⊢ app f u = app f u, <a href='eq_refl.htm'>eq_refl</a>.
185. 50, 51, 1, 2, 3, 4, 5, 182 ⊢ (u, app f u) ∈ f,
  <a href='map_app_elim.htm'>map_app_elim</a> 179 183 184.
186. 50, 51, 1, 2, 3, 4, 5 ⊢
  u ∈ inv_img R {x} → (u, app f u) ∈ f, <a href='subj_intro.htm'>subj_intro</a> 185.
187. 50, 51, 1, 2, 3, 4, 5 ⊢
  ∀u. u ∈ inv_img R {x} → (u, app f u) ∈ f, <a href='uq_intro.htm'>uq_intro</a> 186.
188. 50, 51, 1, 2, 3, 4, 5 ⊢ fn_on f (inv_img R {x}),
  <a href='fn_on_from_map.htm'>fn_on_from_map</a> 179 181.
189. 189 ⊢ x ∈ X, <a href='hypo.htm'>hypo</a>.
190. 3, 4, 5, 189 ⊢ ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ f) →
  (x, φ x (restr g (inv_img R {x}))) ∈ f, <a href='subj_elim.htm'>subj_elim</a> 37 189.
191. 50, 51, 1, 2, 3, 4, 5, 189 ⊢
  (∀u. u ∈ inv_img R {x} → (u, app f u) ∈ f) →
  (x, φ x (restr f (inv_img R {x}))) ∈ f, <a href='uq_bounded_elim.htm'>uq_bounded_elim</a> 190 188.
192. 50, 51, 1, 2, 3, 4, 5, 189 ⊢
  (x, φ x (restr f (inv_img R {x}))) ∈ f, <a href='subj_elim.htm'>subj_elim</a> 191 187.
193. 50, 51, 1, 2, 3, 4, 5, 189 ⊢
  φ x (restr f (inv_img R {x})) = app f x, <a href='map_app_intro.htm'>map_app_intro</a> 179 192.
194. 50, 51, 1, 2, 3, 4, 5, 189 ⊢
  app f x = φ x (restr f (inv_img R {x})), <a href='eq_symm.htm'>eq_symm</a> 193.
195. 50, 51, 1, 2, 3, 4, 5 ⊢
  x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='subj_intro.htm'>subj_intro</a> 194.
196. 50, 51, 1, 2, 3, 4, 5 ⊢
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='uq_intro.htm'>uq_intro</a> 195.
197. 50, 51, 1, 2, 3, 4, 5 ⊢ set f ∧ map f X Y, <a href='conj_intro.htm'>conj_intro</a> 152 179.
198. 50, 51, 1, 2, 3, 4, 5 ⊢ set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='conj_intro.htm'>conj_intro</a> 197 196.
199. 50, 51, 1, 2, 3, 4, 5 ⊢ ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='ex_intro.htm'>ex_intro</a> 198.
200. 50, 51, 1, 2, 3, 4 ⊢ f = ⋂F → ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='subj_intro.htm'>subj_intro</a> 199.
201. 50, 51, 1, 2, 3, 4 ⊢ ⋂F = ⋂F → ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), 200.
202. ⊢ ⋂F = ⋂F, <a href='eq_refl.htm'>eq_refl</a>.
203. 50, 51, 1, 2, 3, 4 ⊢ ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='subj_elim.htm'>subj_elim</a> 201 202.
204. 50, 51, 1, 2, 3 ⊢
  F = {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A} →
  ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='subj_intro.htm'>subj_intro</a> 203.
205. 50, 51, 1, 2, 3 ⊢
  {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A}
  = {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A} →
  ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), 204.
206. ⊢ {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A}
  = {A | A ⊆ X × Y ∧ ∀x. x ∈ X →
  ∀g. fn_on g (inv_img R {x}) →
  (∀u. u ∈ inv_img R {x} → (u, app g u) ∈ A) →
  (x, φ x (restr g (inv_img R {x}))) ∈ A}, <a href='eq_refl.htm'>eq_refl</a>.
207. 50, 51, 1, 2, 3 ⊢ ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='subj_elim.htm'>subj_elim</a> 205 206.
208. 50, 51 ⊢ wf X R → dom R = X → (∀x. ∀g. φ x g ∈ Y) →
  ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='subj_intro_iii.htm'>subj_intro_iii</a> 207.
wf_rec_existence. ⊢ set X → set Y → wf X R →
  dom R = X → (∀x. ∀g. φ x g ∈ Y) → ∃f. set f ∧ map f X Y ∧
  ∀x. x ∈ X → app f x = φ x (restr f (inv_img R {x})), <a href='subj_intro_ii.htm'>subj_intro_ii</a> 208.
</pre>
<p><b>Dependencies</b><br>The given proof depends on 10 axioms:<br><a href='comp.htm'>comp</a>, <a href='efq.htm'>efq</a>, <a href='eq_refl.htm'>eq_refl</a>, <a href='eq_subst.htm'>eq_subst</a>, <a href='ext.htm'>ext</a>, <a href='lem.htm'>lem</a>, <a href='pairing.htm'>pairing</a>, <a href='power.htm'>power</a>, <a href='subset.htm'>subset</a>, <a href='union.htm'>union</a>.</p>
</body>
</html>